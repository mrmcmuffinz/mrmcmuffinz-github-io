<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("contact-form");
  if (!form) return; // only run on the contact page

  form.addEventListener("submit", async function (event) {
    event.preventDefault(); // stop the normal form submit / redirect

    const submitButton = form.querySelector("button[type='submit']");
    if (submitButton) {
      submitButton.disabled = true;
      submitButton.textContent = "Sending...";
    }

    try {
      const response = await fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { "Accept": "application/json" }
      });

      if (response.ok) {
        // On success, go to your own thanks page
        window.location.href = "https://mrmcmuffinz.github.io/thanks/";
      } else {
        alert("There was a problem sending your message. Please try again later.");
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.textContent = "Send";
        }
      }
    } catch (error) {
      console.error(error);
      alert("There was a network error. Please try again later.");
      if (submitButton) {
        submitButton.disabled = false;
        submitButton.textContent = "Send";
      }
    }
  });
});
</script>
